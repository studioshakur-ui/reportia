@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Base globale ---------- */
@layer base {
  :root {
    color-scheme: light;
  }
  .dark {
    color-scheme: dark;
  }

  html, body, #root {
    @apply h-full;
  }

  body {
    @apply bg-surface text-text font-sans antialiased;
  }

  /* Dark */
  .dark body {
    @apply bg-surface-dark text-text-light;
  }

  /* Titres */
  h1 { @apply text-2xl md:text-3xl font-semibold text-text; }
  h2 { @apply text-xl md:text-2xl font-semibold text-text; }
  h3 { @apply text-lg md:text-xl font-semibold text-text; }
  .dark h1, .dark h2, .dark h3 { @apply text-white; }

  /* Liens */
  a { @apply text-brand-700 hover:text-brand-800 underline-offset-2; }
  .dark a { @apply text-brand-400 hover:text-brand-300; }
}

/* ---------- Composants utilitaires (réutilisables) ---------- */
@layer components {
  /* Boutons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl font-medium
           transition-colors duration-150 focus:outline-none focus-visible:ring-2
           focus-visible:ring-brand-400 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  .btn-primary {
    @apply bg-brand-700 text-white hover:bg-brand-800 active:bg-brand-900 shadow-soft;
  }
  .btn-secondary {
    @apply border border-brand-700 text-brand-700 bg-white hover:bg-brand-50;
  }
  .dark .btn-secondary {
    @apply border-brand-400 text-brand-300 bg-surface-dark hover:bg-surface-dark2;
  }
  .btn-ghost {
    @apply text-brand-700 hover:bg-brand-50;
  }
  .dark .btn-ghost {
    @apply text-brand-300 hover:bg-surface-dark2;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium;
  }
  .badge-success { @apply bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-300; }
  .badge-warn    { @apply bg-yellow-50 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300; }
  .badge-danger  { @apply bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300; }
  .badge-info    { @apply bg-brand-50 text-brand-700 dark:bg-brand-900/30 dark:text-brand-300; }

  /* Cartes (panneaux) */
  .card {
    @apply bg-white dark:bg-surface-dark2 rounded-2xl shadow-soft border border-surface-line/60 dark:border-white/10;
  }
  .card-header {
    @apply px-4 md:px-6 py-4 border-b border-surface-line/60 dark:border-white/10 flex items-center justify-between;
  }
  .card-body   { @apply p-4 md:p-6; }
  .card-footer { @apply px-4 md:px-6 py-4 border-t border-surface-line/60 dark:border-white/10; }

  /* Inputs */
  .input, .select, .textarea {
    @apply w-full rounded-xl border border-surface-line bg-white text-text
           placeholder:text-text-muted/70 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brand-300;
  }
  .dark .input, .dark .select, .dark .textarea {
    @apply bg-surface-dark2 border-white/10 text-text-light placeholder:text-text-light/60 focus:ring-brand-600;
  }

  /* Tabs (pills) */
  .tabs       { @apply flex items-center gap-2; }
  .tab        { @apply btn btn-ghost rounded-full px-4 py-2; }
  .tab-active { @apply bg-brand-700 text-white hover:bg-brand-800; }

  /* Liste vide / état d’erreur */
  .empty {
    @apply mx-auto max-w-xl text-center text-text-muted dark:text-white/70 py-10;
  }
  .empty-icon {
    @apply mx-auto mb-3 size-10 rounded-full bg-surface-muted dark:bg-white/10 flex items-center justify-center;
  }
  .error {
    @apply text-danger font-medium;
  }

  /* Bouton “synchro” (accent) */
  .sync-chip {
    @apply inline-flex items-center gap-2 rounded-full bg-brand-700 text-white px-3 py-1 text-sm shadow-soft;
  }

  /* Tables lisibles (manager) */
  .table {
    @apply w-full border-separate border-spacing-0 text-sm;
  }
  .thead th {
    @apply bg-surface-muted dark:bg-surface-dark2 text-text dark:text-white/90 text-left
           px-3 py-2 border-b border-surface-line dark:border-white/10 sticky top-0 z-10;
  }
  .tbody td {
    @apply px-3 py-2 border-b border-surface-line/60 dark:border-white/10;
  }
  .tr:hover { @apply bg-brand-50/60 dark:bg-white/5; }
}

/* ---------- Helpers de layout ---------- */
@layer utilities {
  .container-page {
    @apply max-w-7xl mx-auto px-3 md:px-6;
  }
  .page-header {
    @apply container-page mt-4 md:mt-6 mb-4 md:mb-6;
  }
}
